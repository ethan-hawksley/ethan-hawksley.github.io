---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import PostPreview from '../../components/PostPreview.astro';

const allPosts = (await getCollection('posts')).sort((a, b) =>
  a.data.pubDate < b.data.pubDate ? 1 : -1,
);
---

<Layout
  pageTitle="Blog | Ethan Hawksley - Software Developer & CS Student"
  pageDescription="A technical blog by Ethan Hawksley. Articles featuring a variety of topics such as software engineering, computer science concepts, and more!"
  ogType="website"
>
  <h1>Blog</h1>
  <ul>
    {
      allPosts.map((post) => (
        <PostPreview
          url={`/blogg/${post.id}/`}
          title={post.data.title}
          description={post.data.description}
          pubDate={post.data.pubDate}
        />
      ))
    }
  </ul>
</Layout>
